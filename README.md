# RESERVE-IT Backend

> **동시성 제어와 트랜잭션 안정성을 고려한 예약 관리 백엔드 서비스**
> 실무 환경을 가정하여 기획–설계–개발–테스트–운영 전 과정을 직접 경험하기 위한 개인 프로젝트입니다.

---

## 1. 프로젝트 개요

RESERVE-IT은 병원 예약, 공연 좌석 예약, 공유 오피스 예약과 같이 **동시에 하나의 자원을 여러 사용자가 요청할 수 있는 상황**을 가정한 예약 관리 시스템입니다.

단순 CRUD 구현을 넘어서, 실제 서비스에서 발생할 수 있는 **동시성 문제, 트랜잭션 처리, 인증/인가, 장애 상황**을 어떻게 해결할 것인지에 초점을 맞췄습니다.

---

## 2. 프로젝트 목표

* Spring 기반 백엔드 서비스의 **실무 개발 프로세스 경험**
* 예약 도메인에서 발생하는 **동시성 이슈 해결 경험**
* 트랜잭션, 락, 상태 전이 설계 능력 증명
* 면접에서 기술적 의사결정을 설명할 수 있는 포트폴리오 구축

---

## 3. 기술 스택

### Backend

* Java 17 (LTS)
* Spring Boot 3.x
* Spring MVC
* Spring Data JPA
* Spring Transaction
* Spring Security

### Database

* PostgreSQL

### Cache / Lock

* Redis (TTL 기반 임시 예약, 분산 락)

### Infra

* Docker
* Docker Compose
* (선택) AWS EC2 / RDS

---

## 4. 아키텍처 개요

* **Layered Architecture** 기반

  * Controller
  * Service
  * Repository
* 도메인 단위 패키지 구조 채택
* 인증/인가, 예외 처리, 로깅은 Global 영역에서 공통 처리

---

## 5. 핵심 도메인 설계

### User

* 서비스 사용자
* JWT 기반 인증

### Resource

* 예약 대상 자원 (좌석, 시간 슬롯 등)
* 하나의 자원은 동시에 하나의 확정 예약만 허용

### Reservation

* 사용자와 자원 간의 예약 관계
* 예약 상태에 따른 명확한 상태 전이 관리

```text
TEMP       -> 임시 예약 (TTL 적용)
CONFIRMED  -> 예약 확정
CANCELLED  -> 예약 취소 또는 만료
```

---

## 6. 주요 기능

### 인증 / 인가

* 회원가입 / 로그인
* JWT 기반 인증
* Spring Security Filter Chain 구성

### 자원 조회

* 예약 가능한 자원 목록 조회
* 자원 단건 조회

### 예약 관리

* 임시 예약 생성
* 예약 확정
* 예약 취소
* TTL 만료 시 자동 취소

---

## 7. 동시성 처리 전략 (핵심)

### 문제 상황

* 여러 사용자가 동시에 동일한 자원을 예약 시도
* 중복 예약 발생 가능성

### 해결 전략

1. Redis 분산 락을 통한 1차 동시성 제어
2. DB 트랜잭션을 통한 2차 정합성 보장
3. 예약 상태 기반 비즈니스 검증

> **단일 서버 환경을 기준으로 설계하되, 확장 가능한 구조를 고려**했습니다.

---

## 8. 트랜잭션 설계

* Service Layer에서 @Transactional 적용
* 예약 확정 시 상태 전이를 하나의 트랜잭션으로 처리
* 실패 시 전체 롤백 보장

---

## 9. 테스트 전략

* JUnit5 기반 단위 테스트
* 예약 로직 통합 테스트
* ExecutorService를 활용한 동시성 테스트

> 동시에 다수의 요청이 들어와도 하나의 예약만 성공하는지 검증

---

## 10. 예외 처리 및 응답 규격

* Global Exception Handler를 통한 공통 예외 처리
* 비즈니스 예외와 시스템 예외 분리

```json
{
  "code": "RESERVATION_DUPLICATED",
  "message": "이미 예약된 자원입니다"
}
```

---

## 11. 로깅 및 모니터링

* 요청 단위 로그 추적
* 예약 실패 사유 로그 기록
* 운영 환경에서 문제 추적을 고려한 로그 설계

---

## 12. 실행 방법

```bash
# Docker 환경 실행
docker-compose up -d
```

---

## 13. 프로젝트를 통해 얻은 점

* Spring 트랜잭션과 동시성 문제에 대한 실질적인 이해
* 단순 기능 구현이 아닌 **문제 해결 중심의 설계 경험**
* 면접에서 기술적 선택을 논리적으로 설명할 수 있는 근거 확보

---

## 14. 향후 개선 사항

* 부하 테스트 도구를 활용한 성능 측정
* 비동기 처리 도입
* 무중단 배포 구조 적용

---

## 15. 개발자

* 개인 프로젝트
* Backend Engineer 지망
